const questionElement = document.getElementById("question");
const answerElement = document.getElementById("answer");
const submitButton = document.getElementById("submit");
const messageElement = document.getElementById("message");
// Function to get the current question from the server

function getQuestion() {
    fetch('/question')
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      questionElement.textContent = data.question;
    })
    .catch(error => {
      console.error(error);
      questionElement.textContent = 'Failed to retrieve question.';
    });
}

    // Function to submit the user's answer to the server
    function submitAnswer() {
  const userAnswer = answerElement.value;
  fetch('/answer', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ answer: userAnswer }),
  })
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {

      // 3 seconds ke liye error message display
      messageElement.textContent = data.message;
      setTimeout(()=>{
        messageElement.textContent="";
      },3000)
      // Clear the answer textarea
      answerElement.value = "";
      // Get the next question
      getQuestion();
    })
    .catch(error => {
      console.error(error);
      messageElement.textContent = 'Error submitting answer.';
          setTimeout(()=>{
            messageElement.textContent="";
          },3000)
    });
    }
    //socket daal

    // Event listener for the Submit button
    submitButton.addEventListener('click', submitAnswer);
    answerElement.addEventListener('keypress', (e) => {
      if(e.key === "Enter"){
        submitAnswer();
      }
    });


    // Initialize the game by getting the first question
    getQuestion();

    // Obfuscated version of the above js
    // const _0x329309=_0x4616,_0x3d4365=_0x4616;(function(_0x28c9ad,_0x229be3){const _0x4168b0=_0x4616,_0x28e4e7=_0x4616,_0x299782=_0x28c9ad();while(!![]){try{const _0x3657a4=-parseInt(_0x4168b0(0x19a))/(0x1ecc+-0x190c+-0x5bf)*(-parseInt(_0x4168b0(0x1a4))/(-0x1e4e+-0x23*-0x9a+0x942))+parseInt(_0x28e4e7(0x1b4))/(-0x74a*0x5+-0x224*0x9+-0x1*-0x37b9)*(-parseInt(_0x28e4e7(0x1bd))/(0x138*0xa+-0x1*0xd6d+0x1*0x141))+-parseInt(_0x4168b0(0x1c5))/(0x2*0x503+0xfa6*0x1+-0x19a7*0x1)*(parseInt(_0x4168b0(0x1a0))/(0x133e+-0x1*0x1287+-0x1*0xb1))+-parseInt(_0x28e4e7(0x1d0))/(0x3bb+0x6a9*0x1+-0xa5d)*(-parseInt(_0x28e4e7(0x18e))/(0x2fa+-0x13cb+0x10d9))+parseInt(_0x4168b0(0x1cf))/(0x1*0x1cd3+-0x2009+-0x33f*-0x1)*(-parseInt(_0x28e4e7(0x1cd))/(-0x1949*-0x1+-0x83*0xb+0xa2*-0x1f))+parseInt(_0x28e4e7(0x186))/(0x554+-0x1424+0xedb)+parseInt(_0x28e4e7(0x1a8))/(-0x2668+-0xa66+0x30da)*(parseInt(_0x4168b0(0x1c6))/(-0x2*-0x259+-0x250c*-0x1+-0x29b1));if(_0x3657a4===_0x229be3)break;else _0x299782['push'](_0x299782['shift']());}catch(_0x208edd){_0x299782['push'](_0x299782['shift']());}}}(_0xf1ed,-0xabd38+0x7e758*-0x1+0x18a27b));const questionElement=document[_0x329309(0x193)+_0x329309(0x1a5)](_0x3d4365(0x1cc)),answerElement=document[_0x3d4365(0x193)+'ById'](_0x329309(0x18d)),submitButton=document[_0x329309(0x193)+_0x329309(0x1a5)](_0x3d4365(0x1cb)),messageElement=document[_0x329309(0x193)+'ById']('message');function getQuestion(){const _0x527ce1=_0x329309,_0x33e7b7=_0x329309,_0x16ef6f=(function(){let _0x2675f4=!![];return function(_0x26ba5c,_0x4195b2){const _0x3f086d=_0x4616,_0x2248a7=_0x4616;if('CLfsd'===_0x3f086d(0x194))throw new _0x17832d(_0x3f086d(0x19c)+_0x3f086d(0x188)+'\x20not\x20ok');else{const _0x397861=_0x2675f4?function(){const _0xd836b2=_0x3f086d,_0x290c79=_0x2248a7;if(_0xd836b2(0x1b5)===_0x290c79(0x1b5)){if(_0x4195b2){if(_0x290c79(0x1ad)===_0xd836b2(0x1ad)){const _0x2f49ff=_0x4195b2[_0x290c79(0x1ae)](_0x26ba5c,arguments);return _0x4195b2=null,_0x2f49ff;}else _0x45d17e[_0xd836b2(0x1c4)]();}}else{let _0x1af7f2;try{_0x1af7f2=_0x3d4b76(_0x290c79(0x1a7)+'nction()\x20'+(_0x290c79(0x1b7)+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x4f8593){_0x1af7f2=_0x52db95;}return _0x1af7f2;}}:function(){};return _0x2675f4=![],_0x397861;}};}()),_0x109628=_0x16ef6f(this,function(){const _0x301cd1=_0x4616,_0x2a9dad=_0x4616;if(_0x301cd1(0x1c2)===_0x301cd1(0x1c2)){const _0x12198b=function(){const _0x4d25cd=_0x2a9dad,_0x3fac66=_0x2a9dad;if(_0x4d25cd(0x1b2)!==_0x3fac66(0x1b2))_0x5c0bee['error'](_0x3db3ac),_0x3b11af(_0x45bb7e[_0x4d25cd(0x1c3)+'t']='Error\x20subm'+_0x3fac66(0x1b9)+_0x4d25cd(0x189),0xbcf+0x11b1*0x2+-0x1ba9);else{let _0x45933d;try{_0x45933d=Function(_0x3fac66(0x1a7)+_0x4d25cd(0x1ac)+(_0x3fac66(0x1b7)+_0x4d25cd(0x182)+_0x3fac66(0x184)+'\x20)')+');')();}catch(_0x3ff1a4){_0x45933d=window;}return _0x45933d;}},_0x10d3b2=_0x12198b(),_0x30a47f=_0x10d3b2[_0x301cd1(0x1b3)]=_0x10d3b2[_0x2a9dad(0x1b3)]||{},_0x175a68=['log',_0x301cd1(0x187),_0x301cd1(0x1ce),_0x301cd1(0x1b0),_0x2a9dad(0x18c),'table',_0x301cd1(0x1ca)];for(let _0x2e797d=-0x1*0xb1b+0x2698*0x1+-0x1*0x1b7d;_0x2e797d<_0x175a68[_0x301cd1(0x19d)];_0x2e797d++){if(_0x301cd1(0x1a3)==='MswzW'){const _0x520604=_0x49c02f[_0x301cd1(0x190)+'r'][_0x301cd1(0x198)]['bind'](_0x3d7da0),_0x182f99=_0x2743a4[_0x3d95ee],_0x2154cf=_0x3149b4[_0x182f99]||_0x520604;_0x520604[_0x2a9dad(0x1bf)]=_0x1626f8[_0x301cd1(0x1a1)](_0x1e8e30),_0x520604['toString']=_0x2154cf[_0x301cd1(0x1c8)][_0x301cd1(0x1a1)](_0x2154cf),_0x25eb3b[_0x182f99]=_0x520604;}else{const _0x1a3fda=_0x16ef6f[_0x2a9dad(0x190)+'r']['prototype']['bind'](_0x16ef6f),_0x566e46=_0x175a68[_0x2e797d],_0x148bd8=_0x30a47f[_0x566e46]||_0x1a3fda;_0x1a3fda[_0x301cd1(0x1bf)]=_0x16ef6f[_0x2a9dad(0x1a1)](_0x16ef6f),_0x1a3fda[_0x301cd1(0x1c8)]=_0x148bd8[_0x2a9dad(0x1c8)][_0x301cd1(0x1a1)](_0x148bd8),_0x30a47f[_0x566e46]=_0x1a3fda;}}}else _0x461fd9=_0x398c24;});_0x109628();const _0x2fbd73={};_0x2fbd73[_0x527ce1(0x196)+'pe']=_0x527ce1(0x18a)+'n/json';const _0x2ba65f={};_0x2ba65f[_0x527ce1(0x1aa)]=_0x33e7b7(0x1b1),fetch(_0x527ce1(0x183),{'method':_0x33e7b7(0x1b6),'headers':_0x2fbd73,'body':JSON[_0x527ce1(0x19e)](_0x2ba65f)})['then'](_0x136be6=>{const _0x2de68f=_0x527ce1,_0x20782f=_0x33e7b7;if(_0x2de68f(0x1c7)===_0x20782f(0x1c7)){if(!_0x136be6['ok'])throw new Error('Network\x20re'+'sponse\x20was'+_0x20782f(0x1bc));return _0x136be6['json']();}else{const _0x45f4ef=_0x22073f[_0x2de68f(0x1ae)](_0x1b957c,arguments);return _0x5af6e4=null,_0x45f4ef;}})[_0x33e7b7(0x1a9)](_0x4832d3=>{const _0x3e0990=_0x527ce1,_0x3cf2b4=_0x33e7b7;_0x3e0990(0x1ba)!==_0x3cf2b4(0x1ba)?(_0x441d33[_0x3e0990(0x1c3)+'t']=_0x2609fd[_0x3e0990(0x18f)],_0xcd7af7(()=>{const _0x29d460=_0x3e0990;_0x2c4771[_0x29d460(0x1c3)+'t']='';},0x5*-0x15d+0x3*-0xce+-0x1f*-0xad),_0x59ab86[_0x3e0990(0x192)]='',_0x26708c()):questionElement[_0x3e0990(0x1c3)+'t']=_0x4832d3['question'];})['catch'](_0x192e40=>{const _0x281cb5=_0x527ce1,_0x8eca68=_0x33e7b7;_0x281cb5(0x1af)===_0x8eca68(0x185)?_0xd6e2ac(_0x281cb5(0x19f))['then'](_0xe34540=>_0xe34540[_0x8eca68(0x197)]())[_0x281cb5(0x1a9)](_0x4bef1b=>{const _0x1efdfc=_0x8eca68,_0xb519e0=_0x281cb5;_0x4bef1b['refresh']===_0x1efdfc(0x18b)&&_0x532f66[_0xb519e0(0x1c4)]();}):(console[_0x281cb5(0x1b0)](_0x192e40),questionElement[_0x8eca68(0x1c3)+'t']=_0x8eca68(0x1bb)+_0x8eca68(0x1a6)+'uestion.');});}function _0x4616(_0xf1ed1a,_0x461602){const _0x31af8b=_0xf1ed();return _0x4616=function(_0x39b14e,_0x254eef){_0x39b14e=_0x39b14e-(-0x1fcd+-0x986+0xab5*0x4);let _0x397725=_0x31af8b[_0x39b14e];return _0x397725;},_0x4616(_0xf1ed1a,_0x461602);}function submitAnswer(){const _0x46facb=_0x3d4365,_0x15731d=_0x329309,_0x2ebedc=answerElement['value'],_0xbe365b={};_0xbe365b[_0x46facb(0x196)+'pe']=_0x46facb(0x18a)+_0x46facb(0x1c9);const _0x587c56={};_0x587c56['answer']=_0x2ebedc,fetch(_0x15731d(0x191),{'method':_0x46facb(0x1b6),'headers':_0xbe365b,'body':JSON[_0x15731d(0x19e)](_0x587c56)})['then'](_0x1fc714=>{const _0x37e9a7=_0x15731d,_0x4f5cf1=_0x15731d;if(!_0x1fc714['ok']){if('VDhCx'===_0x37e9a7(0x181))_0x5ca965=_0xa715c8(_0x4f5cf1(0x1a7)+_0x37e9a7(0x1ac)+(_0x37e9a7(0x1b7)+_0x4f5cf1(0x182)+'rn\x20this\x22)('+'\x20)')+');')();else throw new Error(_0x4f5cf1(0x19c)+_0x37e9a7(0x188)+_0x37e9a7(0x1bc));}return _0x1fc714[_0x4f5cf1(0x197)]();})['then'](_0x4f234d=>{const _0x3a03da=_0x15731d,_0x49ca0b=_0x46facb;if(_0x3a03da(0x199)!==_0x49ca0b(0x199)){if(!_0x365644['ok'])throw new _0x1b77cd(_0x3a03da(0x19c)+'sponse\x20was'+_0x3a03da(0x1bc));return _0xb32889[_0x49ca0b(0x197)]();}else messageElement[_0x3a03da(0x1c3)+'t']=_0x4f234d['message'],setTimeout(()=>{const _0x45e351=_0x3a03da;messageElement[_0x45e351(0x1c3)+'t']='';},-0x1b*0x11a+0x176d+0x13*0xf3),answerElement[_0x3a03da(0x192)]='',getQuestion();})['catch'](_0x2f7b76=>{const _0x41aad9=_0x46facb,_0x29a62d=_0x15731d;if(_0x41aad9(0x1c1)===_0x29a62d(0x1ab)){const _0x237263=_0x2db8fe?function(){const _0x66d5ac=_0x29a62d;if(_0x3dd804){const _0x223aea=_0x2c72ea[_0x66d5ac(0x1ae)](_0x23e32c,arguments);return _0x494152=null,_0x223aea;}}:function(){};return _0x3fc8dd=![],_0x237263;}else console[_0x29a62d(0x1b0)](_0x2f7b76),setTimeout(messageElement[_0x41aad9(0x1c3)+'t']=_0x29a62d(0x1b8)+_0x41aad9(0x1b9)+_0x41aad9(0x189),0x3*0x278+-0x1270+0x146*0x18);});}function refreshPage(){const _0x5eabda=_0x329309,_0x398d62=_0x3d4365;fetch(_0x5eabda(0x19f))[_0x398d62(0x1a9)](_0x5b1937=>_0x5b1937[_0x5eabda(0x197)]())[_0x5eabda(0x1a9)](_0x3f0d77=>{const _0x4ee213=_0x398d62,_0x5b03ca=_0x5eabda;_0x3f0d77['refresh']===_0x4ee213(0x18b)&&location[_0x4ee213(0x1c4)]();});}function _0xf1ed(){const _0x181d07=['RcUkM','POST','{}.constru','Error\x20subm','itting\x20ans','hrFgN','Failed\x20to\x20','\x20not\x20ok','4obTFNu','click','__proto__','keypress','CSWWX','ShfHX','textConten','reload','2253695UwJsPv','6146972YaWpxW','ERhWR','toString','n/json','trace','submit','question','820BPhVvY','info','35784YpXqHA','102109DypcuF','SWxye','ctor(\x22retu','/question','rn\x20this\x22)(','kOFjw','2177703YmOlCq','warn','sponse\x20was','wer.','applicatio','yes','exception','answer','104eXhmKe','message','constructo','/answer','value','getElement','TtJln','addEventLi','Content-Ty','json','prototype','XuSmf','355CDqOKo','stener','Network\x20re','length','stringify','/update','6HRKvdf','bind','Enter','EGunq','4178GlSlzi','ById','retrieve\x20q','return\x20(fu','12aodQkM','then','key','mZpzg','nction()\x20','HkHzR','apply','JJvUM','error','secret','BcZIH','console','1297767pdDIBR'];_0xf1ed=function(){return _0x181d07;};return _0xf1ed();}submitButton['addEventLi'+_0x329309(0x19b)](_0x329309(0x1be),submitAnswer),answerElement[_0x3d4365(0x195)+_0x3d4365(0x19b)](_0x3d4365(0x1c0),_0x586b85=>{const _0x4ccc93=_0x329309,_0x32721b=_0x329309;event[_0x4ccc93(0x1aa)]===_0x32721b(0x1a2)&&submitAnswer();}),getQuestion(),setInterval(refreshPage,0x2de+0x1701+-0xe27);